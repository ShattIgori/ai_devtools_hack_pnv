# TestOps Copilot

## Обзор Проекта

**TestOps Copilot** — это прототип полнофункционального сервиса, предназначенного для автоматизации процесса генерации тестового кода (как для UI, так и для API) с использованием возможностей больших языковых моделей (LLM) и интеграцией с системой контроля версий GitLab.

Проект разработан как **монорепозиторий** с разделением на бэкенд и фронтенд:
*   **Бэкенд:** Реализован на **Python** с использованием фреймворка **FastAPI** для предоставления высокопроизводительного RESTful API.
*   **Фронтенд:** Представляет собой базовый шаблон на **React** с использованием **Vite** для быстрой разработки.

## Ключевые Возможности

*   **Генерация API Тестов:** Автоматическое создание тестового кода на основе загруженной спецификации **OpenAPI (Swagger)**.
*   **Генерация UI Тестов:** Создание тестовых сценариев для пользовательского интерфейса на основе текстовых требований, используя LLM.
*   **Интеграция с GitLab:** Функция прямого коммита сгенерированного тестового кода в указанный репозиторий GitLab.
*   **Докеризация:** Простая и надежная установка и запуск с помощью **Docker** и **Docker Compose**.

## Технологический Стек

| Компонент | Технология | Описание |
| :--- | :--- | :--- |
| **Бэкенд** | Python 3.10+, FastAPI, Uvicorn | Основной язык и фреймворк для API. |
| | Jinja2 | Шаблонизатор для генерации тестового кода. |
| | `python-dotenv` | Управление переменными окружения. |
| **Фронтенд** | React, Vite | Библиотека и сборщик для пользовательского интерфейса. |
| **Инфраструктура** | Docker, Docker Compose | Контейнеризация и оркестрация сервисов. |
| **Интеграция** | LLM (Cloud.ru Evolution Model), GitLab | Использование LLM для генерации и GitLab для коммитов. |

## Структура Проекта

Проект имеет следующую структуру (основные директории):

```
pr_project/
├── backend/                  # Бэкенд-сервис на Python/FastAPI
│   ├── app.py                # Основное FastAPI приложение
│   ├── Dockerfile            # Инструкции для сборки Docker-образа
│   ├── docker-compose.yml    # Конфигурация для запуска в Docker
│   ├── requirements.txt      # Список зависимостей Python
│   ├── llm_client.py         # Клиент для взаимодействия с LLM
│   ├── gitlab_client.py      # Клиент для взаимодействия с GitLab
│   ├── parser.py             # Логика парсинга OpenAPI спецификаций
│   ├── generator.py          # Логика генерации тестового кода
│   └── templates/            # Шаблоны Jinja2 для тестов
└── frontend/                 # Фронтенд-приложение на React/Vite
    ├── index.html            # Главный HTML-файл
    └── ... (исходный код React)
```

## Запуск Проекта

### 1. Запуск через Docker (Рекомендуется)

Это самый простой и надежный способ, так как он автоматически настраивает окружение и зависимости.

1.  Перейдите в корневую директорию проекта:
    ```bash
    cd pr_project/pr_project/pr_project/backend
    ```
2.  Создайте файл `.env` в директории `backend` для хранения переменных окружения:
    ```bash
    # .env file
    CLOUD_RU_API_KEY="ВАШ_КЛЮЧ_LLM_API"
    GITLAB_TOKEN="ВАШ_ТОКЕН_GITLAB"
    ```
    *   **CLOUD_RU_API_KEY:** Ключ для доступа к LLM (например, Cloud.ru Evolution Model).
    *   **GITLAB_TOKEN:** Персональный токен доступа GitLab для выполнения коммитов.
3.  Соберите и запустите контейнер с помощью Docker Compose:
    ```bash
    docker-compose up --build
    ```
4.  Сервис будет доступен по адресу: `http://localhost:8000`

### 2. Локальный запуск (Только Бэкенд)

1.  Перейдите в директорию бэкенда:
    ```bash
    cd pr_project/pr_project/pr_project/backend
    ```
2.  Установите зависимости Python:
    ```bash
    pip install -r requirements.txt
    ```
3.  Установите переменные окружения (замените на ваши реальные ключи):
    ```bash
    export CLOUD_RU_API_KEY="ВАШ_КЛЮЧ_LLM_API"
    export GITLAB_TOKEN="ВАШ_ТОКЕН_GITLAB"
    ```
4.  Запустите сервер Uvicorn:
    ```bash
    uvicorn app:app --host 0.0.0.0 --port 8000 --reload
    ```
5.  Сервис будет доступен по адресу: `http://localhost:8000`

## API Эндпоинты (FastAPI)

После запуска, полная интерактивная документация (Swagger UI) доступна по адресу: `http://localhost:8000/docs`.

| Метод | Путь | Описание |
| :--- | :--- | :--- |
| `POST` | `/generate/api` | **Генерация API тестов.** Принимает файл OpenAPI спецификации и возвращает сгенерированный тестовый код. |
| `POST` | `/generate/ui` | **Генерация UI тестов.** Принимает текстовые требования (`requirements`) и возвращает сгенерированный тестовый код. |
| `POST` | `/commit` | **Коммит в GitLab.** Принимает сгенерированный код, URL репозитория и имя файла для коммита. |
| `GET` | `/health` | Проверка состояния сервиса. |
